# 油墩港数字管理平台

[![Java](https://img.shields.io/badge/Java-8-orange.svg)](https://www.oracle.com/java/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-2.7-green.svg)](https://spring.io/projects/spring-boot)
[![Vue](https://img.shields.io/badge/Vue-3.x-4fc08d.svg)](https://vuejs.org/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)

## 📋 项目概述

油墩港工程作为上海市"一环十射"重要组成部分和内河高等级航道市级重大工程，涵盖航道、枢纽和桥梁工程。本项目旨在构建数字化管理平台，推动工程智能化升级，实现危大工程管理和无废工地建设目标。

### 🎯 项目目标
- **智能化升级**：构建数字化管理平台，提升工程管理效率
- **安全管控**：实现危大工程全方位监控，降低安全事故风险
- **环保建设**：打造无废工地，实现资源循环利用和碳排放优化

## 🏗️ 系统架构

### 整体架构图
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   前端展示层     │    │   业务逻辑层     │    │   数据访问层     │
│                 │    │                 │    │                 │
│ Vue3 + Element  │◄──►│  Spring Boot    │◄──►│  MyBatis Plus   │
│   Plus + 3D     │    │   + 业务服务    │    │   + 数据服务    │
│   可视化引擎     │    │                 │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │
         ▼                       ▼                       ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   3D可视化引擎   │    │   消息中间件     │    │   MySQL数据库   │
│                 │    │                 │    │                 │
│ Cesium.js +     │    │   RabbitMQ +    │    │   主从架构 +     │
│   Three.js      │    │   MQTT Broker   │    │   Redis缓存      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │
         ▼                       ▼                       ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   WebGL渲染     │    │   物联网设备     │    │   对象存储      │
│                 │    │                 │    │                 │
│   实时动画 +    │    │   传感器 +      │    │   MinIO +       │
│   空间分析      │    │   无人机 +      │    │   文件管理      │
│                 │    │   视频流        │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 🛠️ 技术栈

### 后端技术
- **Java 8** - 核心开发语言
- **Spring Boot 2.7** - 应用框架
- **MyBatis Plus** - 数据持久层框架
- **Spring Security** - 安全认证框架

### 前端技术
- **Vue 3.x** - 前端框架
- **Element Plus** - UI组件库
- **Cesium.js** - 3D地球可视化
- **Three.js** - 3D图形渲染
- **TypeScript** - 类型安全

### 数据库与缓存
- **MySQL 5.7** - 主数据库
- **Redis 6.x** - 缓存和会话存储
- **MinIO** - 对象存储服务

### 中间件与消息
- **RabbitMQ** - 消息队列
- **MQTT** - 物联网通信协议
- **WebSocket** - 实时通信

### 部署与运维
- **Docker** - 容器化部署
- **Kubernetes** - 容器编排
- **Nginx** - 反向代理和负载均衡

## 🚀 功能模块

### 1. 危大工程管理模块

#### 1.1 塔吊监测系统
- **实时监控**：倾斜角度、应力、载重、工作半径、风速
- **智能预警**：超限自动报警，多级预警机制
- **3D可视化**：实时塔吊状态展示，作业区域可视化
- **防碰撞**：群塔防碰撞算法，安全区域保护

#### 1.2 桥梁姿态监测系统
- **多参数监测**：索力、应力、偏位、温度、风速
- **工况模拟**：不同施工阶段结构分析
- **实时预警**：三级预警机制，及时响应异常
- **3D模型**：桥梁结构可视化，变形动态演示

#### 1.3 无人机巡检系统
- **智能巡检**：预设航线定时巡检
- **实时传输**：RTMP高清视频流
- **违规抓拍**：自动识别违规行为
- **协同管理**：多无人机任务调度

### 2. 无废工地模块

#### 2.1 水质监测系统
- **多指标监测**：水位、流速、流量、水质
- **实时数据**：24小时连续监测
- **预警机制**：水质异常自动报警
- **数据趋势**：历史数据分析

#### 2.2 能耗监测系统
- **智能采集**：水电表数据自动采集
- **趋势分析**：能耗变化趋势
- **碳值计算**：碳排放转换计算
- **异常预警**：异常消耗预警

#### 2.3 土方流转系统
- **全流程跟踪**：开挖、回填、运输、处理
- **资源化利用**：内部流转优化
- **碳足迹**：碳排放计算与优化
- **数据统计**：土方量统计报表

## 🗄️ 数据库设计

### 核心表结构

#### 桥梁监测表 (bridge_monitoring)
| 字段名 | 类型 | 描述 |
|--------|------|------|
| id | BIGINT | 主键 |
| point_id | VARCHAR(50) | 监测点ID |
| vertical_displ | DECIMAL(10,4) | 竖向位移(mm) |
| lateral_displ | DECIMAL(10,4) | 横向位移(mm) |
| temperature | DECIMAL(5,2) | 环境温度(℃) |
| wind_speed | DECIMAL(5,2) | 风速(m/s) |
| status | TINYINT | 状态(0正常,1预警) |
| create_time | DATETIME | 创建时间 |

#### 土方流转表 (earthwork_flow)
| 字段名 | 类型 | 描述 |
|--------|------|------|
| id | BIGINT | 主键 |
| section_id | VARCHAR(50) | 标段ID |
| excavation | DECIMAL(15,3) | 开挖量(m³) |
| backfill | DECIMAL(15,3) | 回填量(m³) |
| transport_out | DECIMAL(15,3) | 外运量(m³) |
| transport_in | DECIMAL(15,3) | 内运量(m³) |
| carbon_value | DECIMAL(15,3) | 碳转换值(tCO2e) |
| record_date | DATE | 记录日期 |

## 🎨 3D可视化方案

### 技术架构
```
数据源 → 数据处理 → 3D模型渲染
  ↓           ↓           ↓
传感器数据  数据清洗     Three.js模型
设备状态    数据聚合     Cesium场景
视频流      实时计算     设备状态渲染
  ↓           ↓           ↓
WebGL渲染 ← 空间分析 ← 地理信息展示
  ↓
前端展示
```

### 功能亮点
- **塔吊作业实时模拟**：空载/载物状态切换，大臂旋转动画
- **桥梁多工况仿真**：不同施工阶段模型切换，应力分布热力图
- **无人机航线可视化**：飞行路径规划，实时位置跟踪
- **超限预警可视化**：3D空间预警提示，安全区域标识

## 🔌 接口设计

### 桥梁监测数据接口
```http
GET /api/bridge/monitoring/{pointId}
```

**响应示例：**
```json
{
  "code": 200,
  "data": {
    "pointId": "B-P001",
    "verticalDisplacement": 3.25,
    "lateralDisplacement": 1.08,
    "temperature": 28.5,
    "windSpeed": 3.2,
    "status": 0,
    "lastUpdate": "2023-08-15T14:30:45"
  }
}
```

### 土方数据录入接口
```http
POST /api/earthwork/record
```

**请求示例：**
```json
{
  "sectionId": "SEC-001",
  "excavation": 1250.75,
  "backfill": 850.25,
  "transportOut": 400.50,
  "transportIn": 320.25,
  "recordDate": "2023-08-15"
}
```

## 🔒 安全设计

### 危大工程安全监控
- **塔吊群塔防碰撞算法**：智能防碰撞预警
- **桥梁应力超限三级预警**：多级预警机制
- **设备安全运行区域保护**：安全区域定义与监控

### 数据安全保障
- **敏感数据加密存储**：AES-256加密
- **设备通信双向认证**：TLS 1.3加密通信
- **操作日志审计追踪**：完整的操作记录

### 无废工地环保措施
- **污水排放实时监测**：24小时水质监控
- **土方资源化利用追踪**：全流程资源跟踪
- **碳足迹计算与优化**：碳排放量化分析

## 🚀 部署方案

### 系统架构图
```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│    前端     │    │   Nginx     │    │Spring Boot  │
│   Vue3      │◄──►│ 负载均衡    │◄──►│   集群      │
└─────────────┘    └─────────────┘    └─────────────┘
                           │                   │
                           ▼                   ▼
                   ┌─────────────┐    ┌─────────────┐
                   │   MySQL     │    │   Redis     │
                   │   主从      │    │   缓存      │
                   └─────────────┘    └─────────────┘
                           │                   │
                           ▼                   ▼
                   ┌─────────────┐    ┌─────────────┐
                   │物联网设备    │    │   MinIO     │
                   │MQTT Broker  │    │  存储服务   │
                   └─────────────┘    └─────────────┘
```

### 部署步骤
1. **环境准备**：Docker、Kubernetes环境配置
2. **数据库部署**：MySQL主从配置，Redis集群部署
3. **应用部署**：Spring Boot应用容器化部署
4. **前端部署**：Vue应用构建和Nginx配置
5. **监控配置**：日志收集、性能监控、告警配置

## 📅 项目计划

| 阶段 | 主要任务 | 时间 | 里程碑 |
|------|----------|------|--------|
| 一期 | 塔吊监测+水质监测 | 1-4周 | 基础监控功能上线 |
| 二期 | 桥梁监测+能耗监测 | 5-8周 | 3D可视化系统集成 |
| 三期 | 无人机巡检+土方流转 | 9-12周 | 无废工地模块完成 |
| 优化阶段 | 系统集成与性能优化 | 13-16周 | 全平台正式上线 |

## 📊 预期效益

### 安全提升
- **危大工程事故率降低40%**
- **安全隐患响应时间缩短至5分钟内**

### 效率优化
- **工程管理效率提升35%**
- **资源利用率提高25%**

### 环保贡献
- **建筑垃圾减少30%**
- **碳排放降低15%**

## 🚀 快速开始

### 环境要求
- Java 8+
- Node.js 16+
- MySQL 5.7+
- Redis 6.x+
- Docker 20.10+

### 安装步骤
```bash
# 1. 克隆项目
git clone https://github.com/yuffiepro/oilPierHarbour_pro.git
cd oilPierHarbour_pro

# 2. 后端启动
cd backend
mvn spring-boot:run

# 3. 前端启动
cd frontend
npm install
npm run dev

# 4. 数据库初始化
mysql -u root -p < database/init.sql
```

### 配置说明
详细配置请参考 [配置文档](docs/configuration.md)

## 📚 文档

- [API文档](docs/api.md)
- [部署指南](docs/deployment.md)
- [开发指南](docs/development.md)
- [用户手册](docs/user-manual.md)

## 🤝 贡献指南

欢迎提交Issue和Pull Request！请阅读 [贡献指南](CONTRIBUTING.md) 了解详情。

## 📄 许可证

本项目采用 [MIT许可证](LICENSE)。

## 📞 联系我们

- 项目维护者：[维护者姓名]
- 邮箱：[联系邮箱]
- 项目地址：[项目地址]

---

**油墩港数字管理平台** - 让工程管理更智能，让工地更安全，让环境更美好！ 🏗️🌱
